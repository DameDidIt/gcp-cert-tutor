{
  "domains": {
    "1": "[bold cyan]Domain 1: Setting Up a Cloud Solution Environment (20%)[/bold cyan]\n\n[bold]Resource Hierarchy[/bold]\n- [cyan]Organization[/cyan] → Folders → Projects → Resources\n- IAM policies and org policies inherit top-down; more-specific binding wins\n- [cyan]Project[/cyan] is the billing and API boundary: has unique ID, name, and number\n- Use folders to group projects by team, env (dev/prod), or department\n\n[bold]IAM Fundamentals[/bold]\n- [cyan]Principal[/cyan]: who — user, service account, Google group, domain\n- [cyan]Role[/cyan]: a bundle of permissions (e.g. roles/compute.instanceAdmin)\n- [cyan]Binding[/cyan]: attaches a role to a principal on a resource\n- Role types: Basic (Owner/Editor/Viewer), Predefined, Custom\n- [yellow]Least privilege[/yellow]: grant the minimum role needed — avoid basic roles in prod\n- Org policies: constraint-based guardrails (e.g. restrict VM external IPs)\n\n[bold]Cloud Identity & Workspace[/bold]\n- Manage users and groups centrally; federate with corporate IdP via SSO\n- Enable MFA/2-Step Verification for all accounts\n- Cloud Identity Free tier for GCP-only orgs\n\n[bold]Billing[/bold]\n- Billing account linked to one or more projects\n- [cyan]Budget alerts[/cyan]: notify at % thresholds via email or Pub/Sub\n- [cyan]Billing export[/cyan]: stream usage/cost data to BigQuery for analysis\n- [yellow]Key discount types[/yellow]: Committed Use Discounts (1yr/3yr), Sustained Use (auto), Spot/Preemptible\n- Billing roles: Billing Account Admin, Billing Account User (link projects)\n\n[bold]APIs & Operations Suite[/bold]\n- Enable APIs per project via Cloud Console or gcloud\n- Quotas: per-project rate/resource limits; request increases in Console\n- [cyan]Cloud Monitoring[/cyan]: metrics, dashboards, alerting\n- [cyan]Cloud Logging[/cyan]: log ingestion, routing, export to BigQuery/GCS/Pub/Sub\n- [cyan]Cloud Trace[/cyan]: distributed tracing for latency analysis\n- [cyan]Cloud Profiler[/cyan]: continuous CPU/heap profiling for running services\n\n[bold yellow]Exam Tips[/bold yellow]\n- Know hierarchy: org policies > folder policies > project policies\n- \"Editor\" role is too broad — always suggest predefined roles\n- Budget alerts do NOT stop spending; use billing account-level spend limits for that",

    "2": "[bold cyan]Domain 2: Planning and Configuring a Cloud Solution (17.5%)[/bold cyan]\n\n[bold]Compute Resources — Choosing the Right Service[/bold]\n- [cyan]Compute Engine[/cyan]: full VM control, lift-and-shift workloads, custom machine types (e.g. n2-custom-8-16384)\n- [cyan]GKE[/cyan]: containerized workloads; Autopilot (managed nodes) vs. Standard; regional clusters for HA\n- [cyan]Cloud Run[/cyan]: stateless containers, HTTP-triggered, auto-scales to zero; fully managed\n- [cyan]Cloud Functions[/cyan]: event-driven, short-lived functions; Gen 2 built on Cloud Run\n- [yellow]Spot/Preemptible VMs[/yellow]: 60-91% cheaper; can be terminated anytime — use for batch/fault-tolerant work\n- Sole-tenant nodes: compliance/licensing requiring dedicated hardware\n\n[bold]Data Storage Options[/bold]\n- [cyan]Cloud Storage[/cyan]: object storage; Standard/Nearline/Coldline/Archive by access frequency\n- [cyan]Cloud SQL[/cyan]: managed MySQL/PostgreSQL/SQL Server; HA with standby replica; read replicas for scale\n- [cyan]Cloud Spanner[/cyan]: globally distributed relational DB; strong consistency; use when Cloud SQL hits limits\n- [cyan]BigQuery[/cyan]: serverless data warehouse; columnar storage; not for OLTP\n- [cyan]Firestore[/cyan]: NoSQL document DB; scales automatically; good for mobile/web\n- [cyan]Bigtable[/cyan]: HBase-compatible NoSQL; time-series, IoT, analytics at petabyte scale\n- [cyan]Memorystore[/cyan]: managed Redis/Memcached for caching\n\n[bold]Network Resources[/bold]\n- [cyan]VPC[/cyan]: global, spans regions; subnets are regional\n- [cyan]Load Balancers[/cyan]:\n  - Global HTTP(S) LB: layer 7, anycast IP, SSL termination\n  - Regional External LB: TCP/UDP, single region\n  - Internal LB: private traffic within VPC (TCP/UDP or HTTP)\n- [cyan]Network Service Tiers[/cyan]: Premium (global backbone) vs. Standard (ISP routing, cheaper)\n- Cloud CDN: edge caching for HTTP(S) LB backends\n- [yellow]Resource locations[/yellow]: pick region close to users; multi-region for HA storage\n\n[bold yellow]Exam Tips[/bold yellow]\n- Decision tree: serverless → Cloud Run/Functions; containers → GKE; VMs → Compute Engine\n- Spanner when you need horizontal scale + strong consistency + relational SQL\n- Standard tier saves money but adds latency for inter-region traffic",

    "3": "[bold cyan]Domain 3: Deploying and Implementing a Cloud Solution (25%)[/bold cyan]\n\n[bold]Compute Engine[/bold]\n- Create instances: gcloud compute instances create; specify machine type, image, disk, network\n- [cyan]Managed Instance Groups (MIGs)[/cyan]: autoscaling based on CPU, LB capacity, or custom metrics\n- OS Login: centralized SSH access control via IAM (replaces metadata SSH keys)\n- VM Manager: OS patch management, inventory, and configuration\n- [yellow]Startup/shutdown scripts[/yellow]: automate initialization via metadata keys\n\n[bold]GKE[/bold]\n- Create cluster: gcloud container clusters create; --enable-autopilot for Autopilot mode\n- [cyan]Autopilot[/cyan]: Google manages nodes; you pay per pod; recommended for most use cases\n- Regional cluster: control plane replicated across 3 zones for HA\n- Private cluster: nodes have no external IPs; requires Cloud NAT or Authorized Networks\n- Deploy app: kubectl apply -f deployment.yaml; kubectl expose for Service\n- Artifact Registry: store and manage container images (replaces Container Registry)\n\n[bold]Cloud Run & Cloud Functions[/bold]\n- Deploy Cloud Run: gcloud run deploy --image gcr.io/project/app --region us-central1\n- [cyan]Revisions[/cyan]: each deploy creates a revision; traffic splits for canary/blue-green\n- Cloud Functions trigger types: HTTP, Pub/Sub, Eventarc (Cloud Storage, Firestore, etc.)\n- [yellow]Gen 2 Functions[/yellow]: longer timeout (60 min), concurrency, powered by Cloud Run\n- Eventarc: routes events from 90+ sources to Cloud Run, GKE, Workflows\n\n[bold]Data Solutions[/bold]\n- Cloud SQL: gcloud sql instances create; enable HA with --availability-type=REGIONAL\n- BigQuery: bq mk dataset; bq load for batch; Pub/Sub → Dataflow → BQ for streaming\n- Firestore: automatic scaling; operates in Native mode (recommended) or Datastore mode\n- Pub/Sub: asynchronous messaging; create topic + subscription; push or pull delivery\n- Dataflow: Apache Beam managed service for stream and batch ETL pipelines\n\n[bold]Networking[/bold]\n- Create VPC: gcloud compute networks create --subnet-mode=custom\n- Firewall rules: allow/deny by direction (ingress/egress), protocol, ports, source tags/ranges\n- [cyan]Firewall policies[/cyan]: hierarchical (org/folder) or network-level; evaluated before VPC rules\n- Cloud VPN: IPSec tunnel; HA VPN for 99.99% SLA (2 interfaces × 2 tunnels)\n- VPC Peering: connect two VPCs privately; non-transitive; routes not shared by default\n\n[bold]Infrastructure as Code[/bold]\n- [cyan]Terraform[/cyan]: declarative HCL; plan → apply; state file tracks resources\n- Cloud Foundation Toolkit (CFT): opinionated Terraform modules for GCP best practices\n- Config Connector: manage GCP resources as Kubernetes CRDs\n- [cyan]Helm[/cyan]: Kubernetes package manager; charts = templated K8s manifests\n\n[bold yellow]Exam Tips[/bold yellow]\n- HA VPN requires Cloud Router + BGP; Classic VPN is static routing only\n- MIG autoscaling scales out on high load AND scales in (cool-down period matters)\n- Firewall rules: default-deny ingress; stateful — reply traffic automatically allowed",

    "4": "[bold cyan]Domain 4: Ensuring Successful Operation of a Cloud Solution (20%)[/bold cyan]\n\n[bold]Managing Compute Engine[/bold]\n- Remote connect: SSH in browser (Console), gcloud compute ssh, OS Login for centralized access\n- [cyan]Snapshots[/cyan]: incremental backup of persistent disks; schedule via snapshot policies\n- Custom images: create from disk/snapshot for faster instance provisioning\n- VM inventory: Cloud Asset Inventory or Console; filter by labels, zone, status\n- Live migration: VMs move to healthy hosts during maintenance (default behavior)\n\n[bold]Managing GKE[/bold]\n- Cluster inventory: kubectl get nodes/pods; Cloud Console Workloads view\n- [cyan]Node pools[/cyan]: groups of identically configured nodes; add/remove independently\n- Cluster autoscaler: adjusts node count based on pod scheduling demand\n- Horizontal Pod Autoscaler (HPA): scales pod replicas based on CPU/custom metrics\n- Artifact Registry: push/pull images; set up vulnerability scanning\n- Upgrade clusters: gcloud container clusters upgrade; control plane first, then nodes\n\n[bold]Managing Cloud Run[/bold]\n- New revision: every deploy = new revision; traffic not shifted unless specified\n- [cyan]Traffic splitting[/cyan]: canary (5% to new revision), A/B test, rollback to prior revision\n- Scaling: min-instances (avoid cold starts) and max-instances (cost control)\n- Concurrency: requests handled per container instance (default 80)\n\n[bold]Managing Storage & Databases[/bold]\n- [cyan]Cloud Storage lifecycle rules[/cyan]: auto-transition objects between storage classes or delete\n- BigQuery: run jobs, monitor slot utilization, manage partitioned/clustered tables\n- Cloud SQL: backups (automated + on-demand), point-in-time recovery (PITR), failover replica\n- Firestore: indexes, TTL policies for automatic document expiration\n\n[bold]Managing Networking[/bold]\n- [cyan]Subnets[/cyan]: expand IP range (--expand-ip-range); cannot shrink without recreation\n- Cloud DNS: create zones, manage A/AAAA/CNAME records; private zones for internal resolution\n- Cloud NAT: outbound internet for private VM/GKE nodes; no inbound access\n- Reserving static IPs: global (for global LB) or regional; ephemeral IPs change on stop\n\n[bold]Monitoring & Logging[/bold]\n- [cyan]Cloud Monitoring[/cyan]: metrics explorer, dashboards, uptime checks, alerting policies\n- Alert policies: condition → notification channel (email, PagerDuty, Pub/Sub, Slack)\n- [cyan]Cloud Logging[/cyan]: log-based metrics, exclusion filters, log sinks (BQ, GCS, Pub/Sub, Splunk)\n- Audit logs: Admin Activity (always on), Data Access (enable per service), System Event\n- [yellow]Ops Agent[/yellow]: unified agent for Compute Engine — collects logs AND metrics\n- Managed Service for Prometheus: drop-in Prometheus for GKE; query with Grafana\n\n[bold yellow]Exam Tips[/bold yellow]\n- Log Router: use log sinks to export logs; exclusions reduce log ingestion costs\n- Cloud NAT is per-region; configure source IP range to avoid exhausting NAT IPs\n- Snapshot ≠ backup (no app-consistent guarantee for DBs) — use Cloud SQL backups for databases",

    "5": "[bold cyan]Domain 5: Configuring Access and Security (17.5%)[/bold cyan]\n\n[bold]IAM Policies & Roles[/bold]\n- [cyan]IAM policy[/cyan]: resource-level JSON document with role bindings\n- [yellow]Policy evaluation[/yellow]: allow policies checked first; deny policies (org policy) take priority\n- [cyan]Basic roles[/cyan]: Owner, Editor, Viewer — too broad for production; use predefined roles\n- [cyan]Predefined roles[/cyan]: service-specific (e.g. roles/storage.objectViewer)\n- [cyan]Custom roles[/cyan]: compose specific permissions; scoped to org or project; can't include all permissions\n- Policy conditions: attribute-based (time, IP, resource) for fine-grained access\n- Policy inheritance: set at org/folder/project; resource inherits parent bindings\n- [yellow]Effective policy[/yellow] = union of all policies up the hierarchy\n\n[bold]Service Accounts[/bold]\n- Machine identity for applications and VMs (not humans)\n- [cyan]Default SA[/cyan]: auto-created per project; avoid — has broad editor role by default\n- [yellow]Best practice[/yellow]: create dedicated SA per application with minimum permissions\n- Attaching SA to VM: gcloud compute instances set-service-account\n- [cyan]Service account impersonation[/cyan]: principal acts as SA (requires roles/iam.serviceAccountTokenCreator)\n- [cyan]Short-lived credentials[/cyan]: generate access tokens or OIDC tokens; avoids long-lived keys\n- [yellow]SA keys[/yellow]: avoid user-managed keys; prefer Workload Identity (GKE) or attached SAs\n\n[bold]Workload Identity[/bold]\n- Lets GKE pods authenticate as a service account without key files\n- Map K8s ServiceAccount → Google Service Account via IAM binding\n- Recommended over mounting SA keys into pods\n\n[bold]Other Security Controls[/bold]\n- [cyan]VPC Service Controls[/cyan]: perimeter around GCP services; prevent data exfiltration\n- [cyan]Cloud KMS[/cyan]: manage encryption keys; CMEK (customer-managed) vs. Google-managed\n- [cyan]Secret Manager[/cyan]: store API keys, passwords, certs; version and rotate secrets\n- Binary Authorization: enforce signed container images in GKE/Cloud Run deployments\n- Security Command Center: centralized security findings and vulnerability management\n\n[bold yellow]Exam Tips[/bold yellow]\n- Workload Identity > SA key files for GKE workloads — always prefer it\n- When asked to restrict access: predefined role (not basic), least-privilege principle\n- Impersonation ≠ key — impersonation is temporary and auditable; keys are long-lived risk\n- Cloud Audit Logs: Admin Activity is always on; Data Access logs must be explicitly enabled",

    "review": "[bold cyan]Mixed Review: Cross-Domain GCP ACE Concepts[/bold cyan]\n\n[bold]High-Weight Exam Areas (review these first)[/bold]\n- [cyan]Domain 3 (25%)[/cyan]: Deployment — Compute Engine, GKE, Cloud Run, Terraform, networking\n- [cyan]Domain 1 (20%)[/cyan]: Setup — resource hierarchy, IAM, billing, APIs\n- [cyan]Domain 4 (20%)[/cyan]: Operations — monitoring, logging, autoscaling, backups\n\n[bold]Key Decision Frameworks[/bold]\n- [yellow]Compute choice[/yellow]: Serverless? → Cloud Run/Functions. Containers? → GKE. Full VM control? → Compute Engine\n- [yellow]Database choice[/yellow]: Global relational? → Spanner. Managed SQL? → Cloud SQL. NoSQL docs? → Firestore. Analytics? → BigQuery. Time-series/wide-column? → Bigtable\n- [yellow]Networking[/yellow]: Private egress → Cloud NAT. Encrypt inter-region → Cloud VPN. Connect VPCs → VPC Peering or Shared VPC\n\n[bold]Common Gotchas[/bold]\n- MIG autoscaling has a cool-down period before scale-in\n- Log sinks export future logs only — not historical\n- Cloud Storage lifecycle transitions require minimum age thresholds\n- VPC Peering is non-transitive; use Shared VPC for org-wide connectivity\n- Cloud Armor policies attach to backend services, not VMs\n- Default service accounts have Editor role — always create dedicated SAs\n\n[bold]gcloud Cheat Sheet[/bold]\n- gcloud config set project PROJECT_ID\n- gcloud compute instances create NAME --machine-type=e2-medium --zone=us-central1-a\n- gcloud container clusters get-credentials CLUSTER --region=us-central1\n- gcloud run deploy SERVICE --image IMAGE --region REGION --allow-unauthenticated\n- gcloud sql instances create NAME --database-version=MYSQL_8_0 --tier=db-n1-standard-1\n- gsutil mb -l us-central1 gs://BUCKET_NAME\n- bq mk --dataset PROJECT:DATASET\n\n[bold]IAM Quick Reference[/bold]\n- roles/viewer → read-only all services (avoid in prod)\n- roles/storage.objectViewer → read GCS objects\n- roles/compute.instanceAdmin → full VM management\n- roles/container.developer → deploy to GKE\n- roles/logging.logWriter → write logs from app"
  }
}
